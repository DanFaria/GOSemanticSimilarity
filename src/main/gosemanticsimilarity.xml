<tool id="gosemanticsimilarity" name="GOSEmanticSimilarity" version="0.0">
    <description>performs GO semantic similatiry analysis of a set of genes or gene products</description>
    <requirements>
        <requirement type="package" version="0.0">gosemanticsimilarity</requirement>
    </requirements>
    <command detect_errors="exit_code">gosemanticsimilarity 
--go '${go}'
--annotation '${annotation}'
--study '${study}'
--term_measure '${term_measure}'
--gene_measure '${gene_measure}'
$relations
--results '${results}'
    </command>
    <inputs>
        <param name="go" type="data" format="obo,owl" label="Gene Ontology File" help="Gene Ontology file in OBO or OWL format (see http://geneontology.org/page/download-ontology)"/>
        <param name="annotation" type="data" format="tabular,txt" label="Gene Product Annotation File" help="Tabular file containing annotations from gene products to GO terms (in GAF or BLAST2GO format, or a simple two-column table)"/>
        <param name="study" type="data" format="txt" label="Study Set File" help="File containing the gene products corresponding to the study set (one per line)"/>
        <param name="term metric" type="select" label="Term semantic similarity metric" help="The term semantic similarity measure to apply for similarity analysis">
        	<option metric="none"/>
        	<option metric="Resnik"/>
        	<option metric="Lin"/>
        	<option metric="JiangConrath"/>
        	<option metric="PekarStaab"/>
        </param>
        <param name="gene metric" type="select" label="Gene semantic similarity metric" help="The gene semantic similarity measure to apply for similarity analysis. When using Maximum or Best Match Average, one must specify the term semantic similarity measure aswell.">
            <option metric="SimGIC"/>
        	<option metric="SimUI"/>
        	<option metric="CoSim"/>
        	<option metric="Maximum"/>
        	<option metric="Best Match Average"/>
        	
        </param>
        <param name="structural" type="boolean" checked="true" truevalue="--structural" falsevalue="" label="Use structural Information Content" help="Whether to compute the structural information content or the corpus based one"/>
        <param name="relations" type="boolean" checked="false" truevalue="--use_all_relations" falsevalue="" label="Use All Relations" help="Whether to infer annotations through 'part_of' and other non-hierarchical relationships, or only through 'is_a' relations"/>
    </inputs>
    <outputs>
        <data name="results_table" format="tabular" label="${study.name} Results Table"/>
    </outputs>
    <tests>
        <test>
            <param name="go" ftype="obo" value="go.obo"/>
            <param name="annotation" ftype="txt" value="annotations.tab"/>
            <param name="study" ftype="txt" value="study.txt"/>
            <output name="results_table" ftype="tabular" file="results.txt" lines_diff="0"/>
        </test>
    </tests>
    <help>
.. class:: infomark

GOSemanticSimilarity is a Java application that can be used to analyze gene or gene product sets (e.g., from microarray or RNAseq experiments) for semantic similarity.

-----

.. class:: infomark

GOSemanticSimilarity requires:

- A Gene Ontology file in either OBO or OWL format (see http://geneontology.org/page/download-ontology).
- A tabular annotation file in GAF (http://geneontology.org/page/download-annotations) format, BLAST2GO format, or a simple two-column table (e.g. from BioMart) with gene product ids in the first column and GO terms in the second one.
- A list of gene products comprising the study set (a flat text file with one gene product per line).
- A semantic similarity measure of the user's choosing.
-----

.. class:: infomark

GOSemanticSimilarity produces a tabular similarity score result file:

- The result file is a tabular list of pairs of GO terms present in the study set and their respective semantic similarity score.

-----

.. class:: warningmark

Gene or gene products listed in the study set file that are not present in the annotation file will be ignored.
    </help>

    <citations>
        <citation type="bibtex">
@misc{githubgoenrichment,
  author = {Faria, Daniel},
  year = {2019},
  title = {GOSemanticSimilarity},
  publisher = {GitHub},
  journal = {GitHub repository},
  url = {https://github.com/DanFaria/GOEnrichment},
}
        </citation>
    </citations>

</tool>
